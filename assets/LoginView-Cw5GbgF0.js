import{r as h,u as _,c as g,a as o,w as i,v as r,b as c,d as w,F as f,e as d,o as b,f as k}from"./index-BIRwpJyb.js";const v={id:"loginPage",class:"bg-yellow"},C={class:"conatiner loginPage vhContainer"},x=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),y={class:"formControls"},V=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),N=o("label",{class:"formControls_label",for:"email"},"Email",-1),R=o("span",null,"此欄位不可留空",-1),T=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),$=o("span",null,"密碼長度至少六個字元",-1),F={__name:"LoginView",setup(L){const s=h({email:"",password:""}),u="https://todolist-api.hexschool.io",m=_(),p=async()=>{try{const e=await fetch(`${u}/users/sign_in`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.value)});if(e.ok){const t=await e.json(),{exp:n,token:l,nickname:a}=t;document.cookie=`authTokenCookie=${l}; expires=${n}; path=/ `,document.cookie=`authNickname=${a}; expires=${n}; path=/ `,alert("登入成功"),m.push("/todo")}else switch(e.status){case 400:alert("登入失敗：欄位驗證失敗");break;case 401:alert("登入失敗：帳號密碼驗證錯誤");break;case 404:alert("登入失敗：用戶不存在");break}}catch(e){console.log("error"+e)}};return(e,t)=>{const n=d("RouterLink"),l=d("RouterView");return b(),g(f,null,[o("div",v,[o("div",C,[x,o("div",null,[o("form",y,[V,N,i(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.value.email=a),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[r,s.value.email]]),R,T,i(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.value.password=a),class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[r,s.value.password]]),$,o("input",{onClick:p,class:"formControls_btnSubmit",type:"button",value:"登入"}),c(n,{to:"/signup",class:"formControls_btnLink"},{default:w(()=>[k("註冊帳號")]),_:1})])])])]),c(l)],64)}}};export{F as default};
