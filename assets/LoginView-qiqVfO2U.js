import{r as g,u as w,c as f,a as o,w as r,v as i,b as c,d as b,F as k,e as d,o as v,f as C}from"./index-B14GhnoA.js";const x={id:"loginPage",class:"bg-yellow"},y={class:"conatiner loginPage vhContainer"},V=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),N={class:"formControls"},R=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),T=o("label",{class:"formControls_label",for:"email"},"Email",-1),$=o("span",null,"此欄位不可留空",-1),L=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),B=o("span",null,"密碼長度至少六個字元",-1),S={__name:"LoginView",setup(F){const t=g({email:"",password:""}),u="https://todolist-api.hexschool.io",m=w(),p=async()=>{const{email:l,password:s}=t.value;if(!l||!s){alert("所有欄位為必填，請確實填寫!");return}try{const e=await fetch(`${u}/users/sign_in`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)});if(e.ok){const n=await e.json(),{exp:a,token:h,nickname:_}=n;document.cookie=`authTokenCookie=${h}; expires=${a}; path=/ `,document.cookie=`authNickname=${_}; expires=${a}; path=/ `,alert("登入成功"),m.push("/todo")}else switch(e.status){case 400:alert("登入失敗：欄位驗證失敗");break;case 401:alert("登入失敗：帳號密碼驗證錯誤");break;case 404:alert("登入失敗：用戶不存在");break}}catch(e){console.log("error"+e)}};return(l,s)=>{const e=d("RouterLink"),n=d("RouterView");return v(),f(k,null,[o("div",x,[o("div",y,[V,o("div",null,[o("form",N,[R,T,r(o("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.email=a),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[i,t.value.email]]),$,L,r(o("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.password=a),class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[i,t.value.password]]),B,o("input",{onClick:p,class:"formControls_btnSubmit",type:"button",value:"登入"}),c(e,{to:"/signup",class:"formControls_btnLink"},{default:b(()=>[C("註冊帳號")]),_:1})])])])]),c(n)],64)}}};export{S as default};
